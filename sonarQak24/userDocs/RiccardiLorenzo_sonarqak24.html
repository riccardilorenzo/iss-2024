<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.4/dist/css/foundation.min.css" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.4/dist/js/foundation.min.js"crossorigin="anonymous"></script> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="./commons/resources/styles/templateISS.css">
        <link rel="stylesheet" type="text/css" href="./commons/resources/styles/main.css">
        <link rel="stylesheet" type="text/css" href="./commons/resources/styles/navbar.css">
        <link rel="stylesheet" type="text/css" href="./commons/resources/styles/table.css">
        <link rel="stylesheet" type="text/css" href="./commons/resources/styles/code.css">
        <!-- <script type="text/javascript" src="./commons/resources/scripts/myScripts.js"></script> -->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
 
   
</head>
	
		
  


   
<title>Lorenzo Riccardi - Report progetto</title></head>
    
<!--
	<body onload="loadNav();">
		<div id="openButton" class="openButton" onclick="openNav(true)">&#9776; Menu</div>
		<div id="sidenav" class="sidenav">
			<a class="closeButton" href="javascript:void(0)" onclick="closeNav(true)">&times;</a>
			<a href=".README.html">ReadMe</a>
			<a class="sprint" href="../../../Sprint0/Codice/userDocs/Cold%20Storage%20Service%20-%20Natali%20V3.html">Sprint0</a>
			<a class="sprint" href="../../../Sprint1.0/Codice/userDocs/Sprint%201.0%20-%20V3.html">Sprint1.0</a>
			<a class="sprint" href="../../../Sprint1.1/Codice/userDocs/Sprint%201.1%20-%20V3.html">Sprint1.1</a>
			<a id="currentSprint" class="sprint" href="#">&#8211;&#8212; Sprint2 &#8212;&#8211;</a>
			<div class="sidenavSection">
				<a href="#Goal Sprint 2">Goal Sprint 2</a>
				<a href="#Requisiti">Requisiti</a>
				<a href="#Analisi dei Requisiti">Analisi dei Requisiti</a>
				<a href="#Analisi del Problema">Analisi del Problema</a>
				<a href="#Test Plan">Test Plan</a>
				<a href="#Progettazione">Progettazione</a>
				<a href="#Deployment">Deployment</a>
			</div>
			<p class="separator">&mdash;&mdash;&mdash;&ndash;&ndash;&mdash;&mdash;&mdash;</p>
			<a class="sprint" href="../../../Sprint3/Codice/userDoc/Sprint%203.html">Sprint3</a>
			<bottom-spacer/>
		</div>
-->
<body>
<div id="top">
<h1>LABORATORIO DI INGEGNERIA DEI SISTEMI SOFTWARE <font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>Introduction</h2>
 
 
<h2>Requirements</h2>

 
<div class="remark">
Goal: sviluppare un componente software che utilizza il SONAR HC-SR04 e che sia in grado di:
<ul>
<li>ricevere via rete ed eseguire comandi di sonarstart/sonarstop
<li>inviare ad altri componenti software i vaori di distanza rilevati, filtrati in modo che ogni valore D emesso sia un valore intero tale che 0<D<=150
</ul>
</div>

 

<h2>Requirement analysis</h2>
Occhio ai bias, i requisiti non specificano come l'informazione debba essere trasmessa e ricevuta!<br>
L'analisi analizza le problematiche, legate al problema che abbiamo (se si parla di comunicazione Terra-Marte &egrave; diverso dal parlare di Terra-Terra, ad esempio)!<br>
La cosa fondamentale &egrave; trovare lo spettro delle possibilit&agrave; delle forme di interazione che ci possono essere.<br>
Ci sono due modi di comunicare: informazione richiesta o non richiesta (inviata autonomamente dai clienti).<br>
</div>

<h2>Problem analysis</h2>
<ol>
<li>Disponiamo di codice di basso livello sonar.py che attiva il sonar fisico e scrive sul dispositivo standard di output, a intervalli temporali fissi, i valori della distanza corrente rilevata.

<li>Il codice sonar.py non è in grado di inviare informazioi in rete nè di ricevere comandi di sonarstart/sonarstop. Ha inoltre una forma di filtraggio dei valori molto limitata.

<li>Non si ritiene opportuno modificare il codice di basso livello per rispondere alle esigenze applicative. Si ritiene invece più opportuno procedere in modo top down, partendo dalla definizione di un componente di alto livello, denominato sonar24 e modellato come un Actor capace di gestire i seguenti dispatch:
<br>
Dispatch sonarstart : sonarstart(X)
Dispatch sonarstop  : sonarstop(X)
<li>Ricordando i concetti de La Clean Architecture, occorre ora rispondere alla seguente domanda:
<br>
come sonar24 intende ricevere i valori D della distanza misurata?

<li>Per motivi di modularità ed estendiblità, si propende per l’uso di un event:
<br>
Event sonardata : distance(D)
<br>Eventi di questo tipo si suppongono generati da un altro componente, denominato sonardevice, anch’esso modellato come un Actor

<br>Per motivi di efficienza e per evitare l’inutile trasmissione di eventi via rete, si ritiene opportuno utilizzare il concetto di Attori streamer, e le primitive subscribeTo e emitLocalstream

<li>Il componente sonardevice può incapsulare il codice di basso livello sonar.py e implementare i comandi sonarstart/sonarstop, che gli possono essere delegati da sonar24

</ol>
<h2>Test plans</h2> 


<h2>Project</h2> 
<h3>sonarqak24:progettazione<a class="headerlink" href="#sonarqak24-progettazione" title="Permalink to this heading">¶</a></h3>
<p>Il componente <code class="docutils literal notranslate"><span class="pre">sonardevice</span></code> può essere realizzato in due modi:</p>
<ul class="simple">
<li><p>in modo esplicito, definendo un Actor nel modello applicativo</p></li>
<li><p>in modo ‘sommerso’, definendo un <a class="reference internal" href="QakActors24.html#attori-coded"><span class="std std-ref">CodedQActor</span></a>  come <a class="reference external" href="../../../../it.unibo.raspIntro2024/code/kotlin/sonarHCSR04Support23.kt">sonarHCSR04Support23.kt</a></p></li>
</ul>
<p>Inoltre  un filtraggio più accurato dei valori di distanza può essere ottenuto
costruendo una pipe di attori che ha  <span class="blue">sonardevice</span> come sorgente-dati e
un componente <span class="blue">dataCleaner</span> che provvede a eliminare dati spuri.</p>
<p>L’architettura logica di progetto diventa:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 80%">
<col style="width: 20%">
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/sonar24Progetto.PNG"><img alt="_images/sonar24Progetto.PNG" class="align-center" src="file:///Users/lorenzoriccardi/Desktop/Università/Magistrale/Corsi/Ingegneria%20dei%20Sistemi%20Software/issLab24/iss24Material/docs/builded/html/_images/sonar24Progetto.PNG" style="width: 80%;"></a>
</td>
<td><p>La emissione di eventi con <a class="reference internal" href="QakActors24.html#operazioni-relative-agli-eventi"><span class="std std-ref">emitLocalstream</span></a>
viene  visualizzata</p></td>
</tr>
</tbody>
</table>
<p>Inoltre, la pipe può essere estesa introducendo un componente terminale
<span class="blue">distancefilter</span> capace di generare eventi significativi per il livello applicativo,
quali ad esenpio:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Event</span> <span class="n">obstacle</span>  <span class="p">:</span> <span class="n">obstacle</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><span class="worktodo">TODO: affrontare la progettazione</span> del <a class="reference internal" href="SistemaRilevamento.html#sistemarilevamento"><span class="std std-ref">SistemaRilevamento</span></a>.</p>
<p>Iniziamo com <a class="reference external" href="../../../../unibo.sonarqak24/src/sonarqak24base.qak">sonarqak24base</a>. I key-points sono:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%">
<col style="width: 60%">
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="../../../issLab24/iss24Material/docs/builded/html/_images/sonar24ProgettoBase.PNG"><img alt="_images/sonar24ProgettoBase.PNG" class="align-center" src="../../../issLab24/iss24Material/docs/builded/html/_images/sonar24ProgettoBase.PNG" style="width: 80%;"></a>
</td>
<td><ul class="simple">
<li><p>definizione esplicita a livello di modello di <code class="docutils literal notranslate"><span class="pre">sonardevice</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sonar24</span></code> fa <code class="docutils literal notranslate"><span class="pre">subscribeTo</span> <span class="pre">sonardevice</span> <span class="pre">for</span> <span class="pre">sonardata</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sonardevice</span></code> fa <a class="reference internal" href="QakActors24.html#operazioni-relative-agli-eventi"><span class="std std-ref">emitLocalstream</span></a> dell’evento <code class="docutils literal notranslate"><span class="pre">sonardata</span></code></p></li>
<li><p>uso di <a class="reference external" href="../../../../it.unibo.raspIntro2024/code/python/sonar.py">sonar.py</a> come dispositivo di basso livello attivato all’interno di <code class="docutils literal notranslate"><span class="pre">sonardevice</span></code></p></li>
<li><p>uso della feature <span class="remark">lateinit</span> di Koltlin</p></li>
<li><p>uso di <span class="remark">autodispatch</span> <code class="docutils literal notranslate"><span class="pre">doread</span></code> per continuare a consumare i valori
che  <a class="reference external" href="../../../../it.unibo.raspIntro2024/code/python/sonar.py">sonar.py</a> scrive sul dispositico di output</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Una volta verificato che questo sistema minimale funziona, aggiungiamo i comandi di <code class="docutils literal notranslate"><span class="pre">sonarstart/sonarstop</span></code>
e in componente esplicita a livello di modello di <code class="docutils literal notranslate"><span class="pre">datacleaner</span></code>, come proposto
nella  architettura logica di <a class="reference internal" href="#sonarqak24-progettazione"><span class="std std-ref">progetto</span></a></p>
<p>Si veda: <a class="reference external" href="../../../../unibo.sonarqak24/src/sonarqak24.qak">sonarqak24</a>. I key-points sono:</p>
<ul class="simple">
<li><p>…</p></li>
</ul>

<h2>Testing</h2> 
 

<h2>Deployment</h2> 

 
<h2>Maintenance</h2> 
 
<!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
-->
	      	
<br/><br/> 	
</div>  

<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:left;color:white">
By Lorenzo Riccardi email: lorenzo.riccardi@studio.unibo.it, 
<img src="https://i.imgur.com/vd9o7EY.png" alt="mbot" width="15%" height="15%">
GIT repo: https://github.com/riccardilorenzo/iss-2024
</div> 
</body>
</html>
